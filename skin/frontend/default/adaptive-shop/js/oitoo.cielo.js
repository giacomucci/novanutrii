var OitooCielo={getParcelasHtml:function(valor,parcelas,juros,parcelassemjuros,valorminimo,descontoavista){var i=1;var html='';while(i<=parcelas){if(i==1){if(parseFloat(descontoavista)>0){var parcela=parseFloat(valor)-(valor*(parseFloat(descontoavista)/100));html=html+'<option value="'+i+'">à vista - R$ '+parcela.toFixed(2).replace('.',',')+' desconto de '+descontoavista+'% </option>';}else{var parcela=parseFloat(valor);html=html+'<option value="'+i+'">à vista - R$ '+parcela.toFixed(2).replace('.',',')+'</option>';}}else if(i<=parcelassemjuros){parcela=valor/i;if(parseFloat(parcela)<parseFloat(valorminimo)){break;}html=html+'<option value="'+i+'">'+i+'x de R$ '+parcela.toFixed(2).replace('.',',')+'</option>';}else{jurosconvertido=juros/100.00;valor_parcela=valor*jurosconvertido*Math.pow((1+jurosconvertido),i)/(Math.pow((1+jurosconvertido),i)-1);if(parseFloat(valor_parcela)<parseFloat(valorminimo)){break;}html=html+'<option value="'+i+'">'+i+'x de R$ '+valor_parcela.toFixed(2).replace('.',',')+' com juros de '+juros+'%</option>';}i++;}return html;},getJurosAmount:function(valortotal,parcela,parcelasSemJuros,numeroMaximodeParcelas,juros_parcela){jurosAmount=0;if(parcela>parcelasSemJuros){jurosconvertido=juros_parcela/100;parcelacomjuros=valortotal*jurosconvertido*Math.pow((1+jurosconvertido),parcela)/(Math.pow((1+jurosconvertido),parcela)-1);parcelasemjuros=parseFloat(valortotal)/parseFloat(parcela);jurosAmount=parseFloat(parcelacomjuros)-parseFloat(parcelasemjuros);return jurosAmount*parcela;}else{return 0;}},getDiscountAmount:function(valortotal,parcela,desconotavista){if(parcela==1){desconotavista=desconotavista/100;valorcomDesconto=valorTotal*(1-desconotavista);valordodesconto=valorTotal-valorcomDesconto;return valordodesconto;}},getCreditCardLabel:function(cardNumber){var regexVisa=/^4[0-9]{12}(?:[0-9]{3})?/;var regexMaster=/^5[1-5][0-9]{14}/;var regexAmex=/^3[47][0-9]{13}/;var regexDiners=/^3(?:0[0-5]|[68][0-9])[0-9]{11}/;var regexDiscover=/^6(?:011|5[0-9]{2})[0-9]{12}/;var regexJCB=/^(?:2131|1800|35\d{3})\d{11}/;if(regexVisa.test(cardNumber)){return'visa';}if(regexMaster.test(cardNumber)){return'master';}if(regexAmex.test(cardNumber)){return'amex';}if(regexDiners.test(cardNumber)){return'diners';}if(regexDiscover.test(cardNumber)){return'discover';}if(regexJCB.test(cardNumber)){return'jcb';}return'';}}
Event.observe(window,'load',function(){document.observe('click',function(e,el){if(el=e.findElement('.btn-checkout')){setTimeout(function(){$('apelidocielo_numero_cartao_cielo').setValue('');$('apelidocielo_portador_cielo').setValue('');$('apelidocielo_expiracao_mes_cielo').setValue('');$('apelidocielo_expiracao_ano_cielo').setValue('');$('apelidocielo_codigo_seguranca_cielo').setValue('');},5000);}});});